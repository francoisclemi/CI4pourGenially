// retour d'url à analyser : https://firms.modaps.eosdis.nasa.gov/wms/?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=FIRMS:GFO_ACTIVE_FIRES&STYLES=&BBOX=-180,-90,180,90&WIDTH=1024&HEIGHT=512&FORMAT=image/png&TIME=2021-01-01/2021-01-13&key=ba985b05872ec63f614928c2d93ff589<!DOCTYPE html>
<html>
<head>
  <title>Carte des feux de forêt</title>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
</head>
<body>
  <label for="latitude">Latitude :</label>
  <input type="number" id="latitude" step="0.0001" value="-10">
  <label for="longitude">Longitude :</label>
  <input type="number" id="longitude" step="0.0001" value="-55">
  <label for="startDate">Date de début :</label>
  <input type="date" id="startDate" value="2021-01-01">
  <label for="endDate">Date de fin :</label>
  <input type="date" id="endDate" value="2021-01-13">
  <button onclick="getFireDataUrl()">Afficher l'URL WMS</button>
  <div id="map" style="height: 600px;"></div>

  <script>
    // Initialisation de la carte Leaflet
    var map = L.map('map').setView([-10, -55], 5);
    L.tileLayer('https://api.maptiler.com/maps/satellite/{z}/{x}/{y}.jpg?key=cg1oTGylkVWBYghNwXph', {
      attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'
    }).addTo(map);

    // Fonction pour récupérer l'URL WMS
    function getFireDataUrl() {
      var latitude = parseFloat(document.getElementById('latitude').value);
      var longitude = parseFloat(document.getElementById('longitude').value);
      var startDate = document.getElementById('startDate').value;
      var endDate = document.getElementById('endDate').value;
      var wmsUrl = 'https://firms.modaps.eosdis.nasa.gov/wms/';
      var apiKey = 'ba985b05872ec63f614928c2d93ff589';

      // Construire l'URL de la carte WMS
      var bbox = `-180,-90,180,90`;
      var url = `${wmsUrl}?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=FIRMS:GFO_ACTIVE_FIRES&STYLES=&BBOX=${bbox}&WIDTH=1024&HEIGHT=512&FORMAT=image/png&TIME=${startDate}/${endDate}&key=${apiKey}`;

      // Afficher l'URL dans la console
      console.log(url);
    }
  </script>
</body>
</html>
